{"ast":null,"code":"import{Suspense}from'react';import{useRouteLoaderData,json,redirect,defer,Await}from'react-router-dom';import EventItem from'../components/EventItem';import EventsList from'../components/EventsList';import{getAuthToken}from'../util/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EventDetailPage(){const{event,events}=useRouteLoaderData('event-detail');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:\"Loading...\"}),children:/*#__PURE__*/_jsx(Await,{resolve:event,children:loadedEvent=>/*#__PURE__*/_jsx(EventItem,{event:loadedEvent})})}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:\"Loading...\"}),children:/*#__PURE__*/_jsx(Await,{resolve:events,children:loadedEvents=>/*#__PURE__*/_jsx(EventsList,{events:loadedEvents})})})]});}export default EventDetailPage;async function loadEvent(id){const response=await fetch('http://localhost:8080/events/'+id);if(!response.ok){throw json({message:'Could not fetch details for selected event.'},{status:500});}else{const resData=await response.json();return resData.event;}}async function loadEvents(){const response=await fetch('http://localhost:8080/events');if(!response.ok){// return { isError: true, message: 'Could not fetch events.' };\n// throw new Response(JSON.stringify({ message: 'Could not fetch events.' }), {\n//   status: 500,\n// });\nthrow json({message:'Could not fetch events.'},{status:500});}else{const resData=await response.json();return resData.events;}}export async function loader(_ref){let{request,params}=_ref;const id=params.eventId;return defer({event:await loadEvent(id),events:loadEvents()});}export async function action(_ref2){let{params,request}=_ref2;const eventId=params.eventId;const token=getAuthToken();const response=await fetch('http://localhost:8080/events/'+eventId,{method:request.method,headers:{'Authorization':'Bearer '+token}});if(!response.ok){throw json({message:'Could not delete event.'},{status:500});}return redirect('/events');}","map":{"version":3,"names":["Suspense","useRouteLoaderData","json","redirect","defer","Await","EventItem","EventsList","getAuthToken","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EventDetailPage","event","events","children","fallback","style","textAlign","resolve","loadedEvent","loadedEvents","loadEvent","id","response","fetch","ok","message","status","resData","loadEvents","loader","_ref","request","params","eventId","action","_ref2","token","method","headers"],"sources":["C:/Users/Anuja Kokate/OneDrive/Desktop/Anuja/New folder/authentication/frontend/src/pages/EventDetail.js"],"sourcesContent":["import { Suspense } from 'react';\nimport {\n  useRouteLoaderData,\n  json,\n  redirect,\n  defer,\n  Await,\n} from 'react-router-dom';\n\nimport EventItem from '../components/EventItem';\nimport EventsList from '../components/EventsList';\nimport { getAuthToken } from '../util/auth';\n\nfunction EventDetailPage() {\n  const { event, events } = useRouteLoaderData('event-detail');\n\n  return (\n    <>\n      <Suspense fallback={<p style={{ textAlign: 'center' }}>Loading...</p>}>\n        <Await resolve={event}>\n          {(loadedEvent) => <EventItem event={loadedEvent} />}\n        </Await>\n      </Suspense>\n      <Suspense fallback={<p style={{ textAlign: 'center' }}>Loading...</p>}>\n        <Await resolve={events}>\n          {(loadedEvents) => <EventsList events={loadedEvents} />}\n        </Await>\n      </Suspense>\n    </>\n  );\n}\n\nexport default EventDetailPage;\n\nasync function loadEvent(id) {\n  const response = await fetch('http://localhost:8080/events/' + id);\n\n  if (!response.ok) {\n    throw json(\n      { message: 'Could not fetch details for selected event.' },\n      {\n        status: 500,\n      }\n    );\n  } else {\n    const resData = await response.json();\n    return resData.event;\n  }\n}\n\nasync function loadEvents() {\n  const response = await fetch('http://localhost:8080/events');\n\n  if (!response.ok) {\n    // return { isError: true, message: 'Could not fetch events.' };\n    // throw new Response(JSON.stringify({ message: 'Could not fetch events.' }), {\n    //   status: 500,\n    // });\n    throw json(\n      { message: 'Could not fetch events.' },\n      {\n        status: 500,\n      }\n    );\n  } else {\n    const resData = await response.json();\n    return resData.events;\n  }\n}\n\nexport async function loader({ request, params }) {\n  const id = params.eventId;\n\n  return defer({\n    event: await loadEvent(id),\n    events: loadEvents(),\n  });\n}\n\nexport async function action({ params, request }) {\n  const eventId = params.eventId;\n\n  const token = getAuthToken();\n  const response = await fetch('http://localhost:8080/events/' + eventId, {\n    method: request.method,\n    headers: {\n      'Authorization': 'Bearer ' + token\n    }\n  });\n\n  if (!response.ok) {\n    throw json(\n      { message: 'Could not delete event.' },\n      {\n        status: 500,\n      }\n    );\n  }\n  return redirect('/events');\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}