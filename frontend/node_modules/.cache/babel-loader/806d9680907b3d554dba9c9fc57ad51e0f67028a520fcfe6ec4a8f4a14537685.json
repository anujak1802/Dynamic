{"ast":null,"code":"import{json,redirect}from'react-router-dom';import AuthForm from'../components/AuthForm';import{jsx as _jsx}from\"react/jsx-runtime\";function AuthenticationPage(){return/*#__PURE__*/_jsx(AuthForm,{});}export default AuthenticationPage;export async function action(_ref){let{request}=_ref;const searchParams=new URL(request.url).searchParams;const mode=searchParams.get('mode')||'login';if(mode!=='login'&&mode!=='signup'){throw json({message:'Unsupported mode.'},{status:422});}const data=await request.formData();const authData={email:data.get('email'),password:data.get('password')};const response=await fetch('http://localhost:8080/'+mode,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(authData)});if(response.status===422||response.status===401){return response;}if(!response.ok){throw json({message:'Could not authenticate user.'},{status:500});}const resData=await response.json();const token=resData.token;localStorage.setItem('token',token);const expiration=new Date();expiration.setHours(expiration.getHours()+1);localStorage.setItem('expiration',expiration.toISOString());return redirect('/');}","map":{"version":3,"names":["json","redirect","AuthForm","jsx","_jsx","AuthenticationPage","action","_ref","request","searchParams","URL","url","mode","get","message","status","data","formData","authData","email","password","response","fetch","method","headers","body","JSON","stringify","ok","resData","token","localStorage","setItem","expiration","Date","setHours","getHours","toISOString"],"sources":["C:/Users/Anuja Kokate/OneDrive/Desktop/Anuja/New folder/authentication/frontend/src/pages/Authentication.js"],"sourcesContent":["import { json, redirect } from 'react-router-dom';\n\nimport AuthForm from '../components/AuthForm';\n\nfunction AuthenticationPage() {\n  return <AuthForm />;\n}\n\nexport default AuthenticationPage;\n\nexport async function action({ request }) {\n  const searchParams = new URL(request.url).searchParams;\n  const mode = searchParams.get('mode') || 'login';\n\n  if (mode !== 'login' && mode !== 'signup') {\n    throw json({ message: 'Unsupported mode.' }, { status: 422 });\n  }\n\n  const data = await request.formData();\n  const authData = {\n    email: data.get('email'),\n    password: data.get('password'),\n  };\n\n  const response = await fetch('http://localhost:8080/' + mode, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(authData),\n  });\n\n  if (response.status === 422 || response.status === 401) {\n    return response;\n  }\n\n  if (!response.ok) {\n    throw json({ message: 'Could not authenticate user.' }, { status: 500 });\n  }\n\n  const resData = await response.json();\n  const token = resData.token;\n\n  localStorage.setItem('token', token);\n  const expiration = new Date();\n  expiration.setHours(expiration.getHours() + 1);\n  localStorage.setItem('expiration', expiration.toISOString());\n\n  return redirect('/');\n}\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CAEjD,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9C,QAAS,CAAAC,kBAAkBA,CAAA,CAAG,CAC5B,mBAAOD,IAAA,CAACF,QAAQ,GAAE,CAAC,CACrB,CAEA,cAAe,CAAAG,kBAAkB,CAEjC,MAAO,eAAe,CAAAC,MAAMA,CAAAC,IAAA,CAAc,IAAb,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACtC,KAAM,CAAAE,YAAY,CAAG,GAAI,CAAAC,GAAG,CAACF,OAAO,CAACG,GAAG,CAAC,CAACF,YAAY,CACtD,KAAM,CAAAG,IAAI,CAAGH,YAAY,CAACI,GAAG,CAAC,MAAM,CAAC,EAAI,OAAO,CAEhD,GAAID,IAAI,GAAK,OAAO,EAAIA,IAAI,GAAK,QAAQ,CAAE,CACzC,KAAM,CAAAZ,IAAI,CAAC,CAAEc,OAAO,CAAE,mBAAoB,CAAC,CAAE,CAAEC,MAAM,CAAE,GAAI,CAAC,CAAC,CAC/D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,OAAO,CAACS,QAAQ,CAAC,CAAC,CACrC,KAAM,CAAAC,QAAQ,CAAG,CACfC,KAAK,CAAEH,IAAI,CAACH,GAAG,CAAC,OAAO,CAAC,CACxBO,QAAQ,CAAEJ,IAAI,CAACH,GAAG,CAAC,UAAU,CAC/B,CAAC,CAED,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wBAAwB,CAAGV,IAAI,CAAE,CAC5DW,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,QAAQ,CAC/B,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACN,MAAM,GAAK,GAAG,EAAIM,QAAQ,CAACN,MAAM,GAAK,GAAG,CAAE,CACtD,MAAO,CAAAM,QAAQ,CACjB,CAEA,GAAI,CAACA,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,CAAA5B,IAAI,CAAC,CAAEc,OAAO,CAAE,8BAA+B,CAAC,CAAE,CAAEC,MAAM,CAAE,GAAI,CAAC,CAAC,CAC1E,CAEA,KAAM,CAAAc,OAAO,CAAG,KAAM,CAAAR,QAAQ,CAACrB,IAAI,CAAC,CAAC,CACrC,KAAM,CAAA8B,KAAK,CAAGD,OAAO,CAACC,KAAK,CAE3BC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,KAAK,CAAC,CACpC,KAAM,CAAAG,UAAU,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAC7BD,UAAU,CAACE,QAAQ,CAACF,UAAU,CAACG,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAC9CL,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEC,UAAU,CAACI,WAAW,CAAC,CAAC,CAAC,CAE5D,MAAO,CAAApC,QAAQ,CAAC,GAAG,CAAC,CACtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}